<div class="table-container animate-fadeInUp" style="animation-delay: 0.3s;">
    <div class="table-header">
        <h2 class="table-title">
            <i class="fas fa-database" style="margin-right: 8px;"></i>
            Database Anggota HIFI
        </h2>
        <div class="table-toolbar">
            <input 
                type="text" 
                id="searchNama" 
                placeholder="ðŸ” Cari nama..." 
                class="form-control-glass"
                aria-label="Cari anggota"
            >
            <select id="itemsPerPage" class="form-control-glass" aria-label="Items per halaman">
                <option value="10">10 / halaman</option>
                <option value="25" selected>25 / halaman</option>
                <option value="50">50 / halaman</option>
                <option value="100">100 / halaman</option>
            </select>
        </div>
    </div>

    <div class="table-responsive">
        <table id="usersTable" class="table-glass" style="width: 100%;">
            <thead>
                <tr>
                    <th>No</th>
                    <th>Nama</th>
                    <th>NPM</th>
                    <th>Email</th>
                    <th>No. HP</th>
                    <th>Golongan Darah</th>
                    <th>Aksi</th>
                </tr>
            </thead>
            <tbody>
                <% if (users && users.length > 0) { %>
                    <% users.forEach(function(user, index) { %>
                        <tr data-user-id="<%= user._id %>">
                            <td><%= index + 1 %></td>
                            <td>
                                <div style="display: flex; align-items: center; gap: 10px;">
                                    <div class="avatar" style="width: 36px; height: 36px; background: linear-gradient(135deg, #DC143C 0%, #1E3A8A 100%); display: flex; align-items: center; justify-content: center; color: white; font-weight: 700; font-size: 14px;">
                                        <%= user.nama ? user.nama.charAt(0).toUpperCase() : 'U' %>
                                    </div>
                                    <div>
                                        <strong style="color: #1F2937;"><%= user.nama || '-' %></strong>
                                        <% if (user.role === 'admin') { %>
                                            <span class="badge-glass badge-red" style="margin-left: 8px; font-size: 10px; padding: 3px 8px;">
                                                <i class="fas fa-shield-alt"></i> Admin
                                            </span>
                                        <% } %>
                                    </div>
                                </div>
                            </td>
                            <td><strong><%= user.npm || '-' %></strong></td>
                            <td><%= user.email || '-' %></td>
                            <td><%= user.hp || '-' %></td>
                            <td>
                                <span class="badge-glass" style="background: rgba(220, 20, 60, 0.1); color: #DC143C; font-weight: 700;">
                                    <%= user.goldar || '-' %>
                                </span>
                            </td>
                            <td>
                                <div style="display: flex; gap: 6px; justify-content: center; align-items: center;">
                                    <a href="/dashboard/edit/<%= user._id %>" class="btn-action btn-edit" title="Edit" aria-label="Edit <%= user.nama %>">
                                        <i class="fas fa-edit"></i>
                                    </a>
                                    <form action="/dashboard/delete/<%= user._id %>?_method=DELETE" method="POST" style="margin: 0; display: inline;" onsubmit="return confirmDelete('<%= user.nama %>')">
                                        <button type="submit" class="btn-action btn-delete" title="Hapus" aria-label="Hapus <%= user.nama %>">
                                            <i class="fas fa-trash-alt"></i>
                                        </button>
                                    </form>
                                </div>
                            </td>
                        </tr>
                    <% }); %>
                <% } else { %>
                    <tr>
                        <td colspan="7" style="text-align: center; padding: 40px; color: #6B7280;">
                            <i class="fas fa-database" style="font-size: 48px; margin-bottom: 16px; opacity: 0.5;"></i>
                            <p style="margin: 0; font-size: 16px; font-weight: 600;">Tidak ada data anggota</p>
                        </td>
                    </tr>
                <% } %>
            </tbody>
        </table>
    </div>

    <div class="dt-bottom" style="margin-top: 20px;">
        <div class="dataTables_info" id="tableInfo"></div>
        <div class="dataTables_paginate" id="tablePaginate"></div>
    </div>
</div>

<script>
    function confirmDelete(nama) {
        return confirm(`Apakah Anda yakin ingin menghapus data "${nama}"?\n\nTindakan ini tidak dapat dibatalkan.`);
    }
</script>
