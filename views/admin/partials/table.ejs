<div class="table-container">
  <!-- TOOLBAR ATAS -->
  <div class="table-toolbar">
    <div class="toolbar-left">
      <span class="toolbar-label">Tampilkan</span>
      <select id="itemsPerPage" class="toolbar-select" aria-label="Items per page">
        <option value="10" selected>10 / page</option>
        <option value="25">25 / page</option>
        <option value="50">50 / page</option>
        <option value="100">100 / page</option>
      </select>
    </div>

    <div class="toolbar-right">
      <input id="searchNama" class="toolbar-search" type="search" placeholder="Cari Nama... (kolom Nama saja)" />
      <button id="btnRefresh" type="button" class="btn-glass">
        <i class="fas fa-sync-alt"></i>&nbsp; Refresh
      </button>
      <div id="exportButtons"></div>
    </div>
  </div>

  <!-- TABEL -->
  <table id="usersTable" class="display nowrap" style="width:100%">
    <thead>
      <tr>
        <th>No</th>
        <th>Username</th>
        <th>Nama</th>
        <th>NPM</th>
        <th>Email</th>
        <th>Telepon</th>
        <th>Role</th>
        <th>Terakhir Update</th>
        <th>Aksi</th>
      </tr>
    </thead>
    <tbody>
      <% users.forEach(function(u, i){ %>
        <!--
          DATASET untuk child row -> PENTING:
          property-nya disamakan dengan edit.ejs
        -->
        <tr
          data-id="<%= u._id %>"
          data-username="<%= u.username || '' %>"
          data-nama="<%= u.nama || '' %>"
          data-npm="<%= u.npm || '' %>"
          data-email="<%= u.email || '' %>"
          data-hp="<%= u.hp || '' %>"
          data-ttl="<%= u.ttl || '' %>"
          data-tgl="<%= u.tgl || '' %>"
          data-agama="<%= u.agama || '' %>"
          data-goldar="<%= u.goldar || '' %>"
          data-rumah="<%= u.rumah || '' %>"
          data-kos="<%= u.kos || '' %>"
          data-pendidikan="<%= u.pendidikan || '' %>"
          data-panitia="<%= u.panitia || '' %>"
          data-organisasi="<%= u.organisasi || '' %>"
          data-pelatihan="<%= u.pelatihan || '' %>"
          data-prestasi="<%= u.prestasi || '' %>"
        >
          <td><%= i + 1 %></td>
          <td><%= u.username %></td>
          <td><%= u.nama || '-' %></td>
          <td><%= u.npm || '-' %></td>
          <td><%= u.email || '-' %></td>
          <!-- TELEPON diambil dari hp -->
          <td><%= u.hp || '-' %></td>
          <td>
            <span class="badge-glass"><i class="fas fa-user"></i> <%= (u.role || 'User') %></span>
          </td>
          <td><%= u.updatedAt || '-' %></td>
          <td class="no-detail">
            <a class="btn-action btn-edit" title="Edit" href="/dashboard/edit/<%= u._id %>">
              <i class="fas fa-pen"></i>
            </a>
            <form action="/dashboard/delete/<%= u._id %>?_method=DELETE" method="POST" style="display:inline">
              <button type="submit" class="btn-action btn-delete" title="Hapus" onclick="return confirm('Hapus data ini?')">
                <i class="fas fa-trash"></i>
              </button>
            </form>
          </td>
        </tr>
      <% }) %>
    </tbody>
  </table>
</div>
