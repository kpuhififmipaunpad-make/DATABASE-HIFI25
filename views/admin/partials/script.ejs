<!-- Font Awesome -->
<script src="https://kit.fontawesome.com/7cc967098c.js" crossorigin="anonymous"></script>

<!-- jQuery / Bootstrap / AdminLTE -->
<script src="/adminlte/plugins/jquery/jquery.min.js"></script>
<script src="/adminlte/plugins/jquery-ui/jquery-ui.min.js"></script>
<script> $.widget.bridge('uibutton', $.ui.button) </script>
<script src="/adminlte/plugins/bootstrap/js/bootstrap.bundle.min.js"></script>
<script src="/adminlte/dist/js/adminlte.js"></script>

<!-- DataTables + Buttons -->
<script src="/adminlte/plugins/datatables/jquery.dataTables.min.js"></script>
<script src="/adminlte/plugins/datatables-bs4/js/dataTables.bootstrap4.min.js"></script>
<script src="/adminlte/plugins/datatables-responsive/js/dataTables.responsive.min.js"></script>
<script src="/adminlte/plugins/datatables-responsive/js/responsive.bootstrap4.min.js"></script>
<script src="/adminlte/plugins/datatables-buttons/js/dataTables.buttons.min.js"></script>
<script src="/adminlte/plugins/datatables-buttons/js/buttons.bootstrap4.min.js"></script>
<script src="/adminlte/plugins/jszip/jszip.min.js"></script>
<script src="/adminlte/plugins/pdfmake/pdfmake.min.js"></script>
<script src="/adminlte/plugins/pdfmake/vfs_fonts.js"></script>
<script src="/adminlte/plugins/datatables-buttons/js/buttons.html5.min.js"></script>
<script src="/adminlte/plugins/datatables-buttons/js/buttons.print.min.js"></script>

<script>
  window.HIFIAdmin = { refreshData: () => window.location.reload() };

  $(function(){
    const $tbl = $('#usersTable');
    if (!$tbl.length) return;

    const table = $tbl.DataTable({
      responsive: true,
      autoWidth: false,
      dom: 't<"dt-bottom"ip>',   // hanya info & paginate di bawah
      searching: true,           // search aktif (dipakai input custom)
      lengthChange: false,
      pageLength: 10,
      pagingType: 'full_numbers',
      columnDefs: [
        { targets: 'no-export', orderable: false, searchable: false }
      ],
      order: [[1, 'asc']],
      language: {
        paginate: { previous: 'Sebelumnya', next: 'Selanjutnya' },
        info: 'Menampilkan _START_ sampai _END_ dari _TOTAL_ data',
        infoEmpty: 'Tidak ada data',
        zeroRecords: 'Data tidak ditemukan'
      }
    });

    // ===== Export buttons (ijo) DIPASANG DI ATAS =====
    const btns = new $.fn.dataTable.Buttons(table, {
      buttons: [
        { extend: 'excelHtml5', text: '<i class="fas fa-file-excel"></i> Export Excel', className: 'dt-btn-green' },
        { extend: 'pdfHtml5',   text: '<i class="fas fa-file-pdf"></i> Export PDF',   className: 'dt-btn-green', orientation: 'landscape', pageSize: 'A4' },
        { extend: 'print',      text: '<i class="fas fa-print"></i> Print',           className: 'dt-btn-green' }
      ]
    });
    table.buttons().container().appendTo($('#exportButtons'));

    // ===== Items per page (10/page) =====
    $('#itemsPerPage').on('change', function(){
      table.page.len(parseInt(this.value, 10) || 10).draw();
    });

    // ===== Search global (pojok kanan) =====
    $('#searchTable').on('input', function(){
      table.search(this.value).draw();
    });

    // (Tidak ada row-detail saat klik baris)
  });
</script>
